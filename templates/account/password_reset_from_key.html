{% extends "base.html" %}
{% load static %}

{% block page_title %} BeginnersCTF | パスワード変更{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/account.css' %}"/>
{% endblock %}

{% load i18n %}

{% block content %}

<div class="container my-5">
  <!-- タイトル -->
  <h6 class="font-weight-bold text-center grey-text text-uppercase small mb-4">password_reset_from_key</h6>
  <h3 class="font-weight-bold text-center white-text pb-2">パスワード変更</h3>
  <hr class="w-header white my-4">

  <div class="row d-flex align-items-center justify-content-center">
    <div class="card col-11 col-sm-10 col-md-8 col-lg-4">
      <div class="card-body z-depth-2 px-4">

        {% if token_fail %}
        {% url 'account_reset_password' as passwd_reset_url %}
        <p>このパスワードリセット用リンクは無効になっています。 <a href="{{ passwd_reset_url }}">パスワードリセット再申請</a></p>

        {% else %}
        {% if form %}
        <form method="POST" action="{{ action_url }}">
          {% csrf_token %}

          <table class="table">
            {{ form.as_table }}
          </table>

          <input type="submit" name="action" class="primaryAction btn btn-primary btn-block waves-effect waves-light" value="{% trans 'change password' %}"/>
        </form>
        {% else %}
        <p>パスワードは変更されています。</p>
        {% endif %}
        {% endif %}

      </div>
    </div>
  </div>

</div>
{% endblock %}
